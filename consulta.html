<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCDLF - Estatus VIP</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --rosa: #db2777; --naranja: #f59e0b; --fondo: #0f172a; }
        body { background-color: var(--fondo); color: white; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        .card { background-color: #1e293b; width: 100%; max-width: 450px; padding: 30px; border-radius: 20px; border-top: 6px solid var(--naranja); text-align: center; }
        input { width: 100%; padding: 15px; margin-top: 20px; border-radius: 8px; background: #0f172a; color: white; border: 1px solid #334155; width: 80%; }
        button { width: 100%; padding: 15px; background: var(--rosa); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .info-box { background: #064e3b; padding: 20px; border-radius: 12px; margin-top: 20px; }
        #pase-vip { background: white; color: black; padding: 40px; text-align: center; font-family: Arial; border: 10px solid #0f172a; }
    </style>
</head>
<body>
    <div class="card">
        <h1>Consultar Estatus</h1>
        <input type="text" id="inputFolio" placeholder="TU FOLIO">
        <button onclick="buscar()">Verificar</button>
        <div id="resultado"></div>
    </div>

    <div style="display: none;">
        <div id="pase-vip">
            <h1 style="color:#db2777">LA CASA DE LOS FAMOSOS</h1>
            <p>PASE OFICIAL DE HABITANTE</p>
            <h2 id="pdfNombre" style="font-size: 30px;"></h2>
            <p>Correo: <span id="pdfCorreo" style="font-weight:bold; color:#db2777"></span></p>
            <div id="pdfFolio" style="font-size: 24px; font-weight: bold; border: 2px solid black; margin: 20px 0;"></div>
            <p style="background:black; color:white; padding:5px;">GUARDA ESTE PDF PARA INGRESAR</p>
        </div>
    </div>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbxOuJkxPbL5n3LJdQtI5GscBqIQ6-ZrA86KqjpZJtDu7GUclbT9hnQLTPJWhv7IExlm/exec';
        let nData = ""; let fData = "";

        async function buscar() {
            const f = document.getElementById('inputFolio').value.trim();
            if(!f) return;
            document.getElementById('resultado').innerHTML = "Buscando...";
            try {
                const resp = await fetch(scriptURL + "?folio=" + f);
                const data = await resp.text();
                if (data.includes("SELECCIONADO")) {
                    nData = data.split("|")[1]; fData = f;
                    document.getElementById('resultado').innerHTML = `
                        <div class="info-box">
                            <p>‚≠ê ¬°FELICIDADES ${nData}!</p>
                            <button onclick="descargar()" style="background:#22c55e;">üì• BAJAR PASE VIP</button>
                        </div>`;
                } else { document.getElementById('resultado').innerHTML = "<p>No seleccionado a√∫n.</p>"; }
            } catch { document.getElementById('resultado').innerHTML = "Error."; }
        }

        function descargar() {
            document.getElementById('pdfNombre').innerText = nData;
            document.getElementById('pdfFolio').innerText = fData;
            document.getElementById('pdfCorreo').innerText = nData.replace(/\s+/g, '').toLowerCase() + "@alexissesence.mx";
            html2pdf().from(document.getElementById('pase-vip')).save();
        }
    </script>
</body>
</html>
